webpackJsonp([1],{"3Lt7":function(t,e,n){"use strict";var i=["-moz-box-","-webkit-box-",""],o=(Number,String,Number,String,["-moz-box-","-webkit-box-",""]),s={name:"flexbox-item",props:{span:[Number,String],order:[Number,String]},beforeMount:function(){this.bodyWidth=document.documentElement.offsetWidth},methods:{buildWidth:function(t){return"number"==typeof t?t<1?t:t/12:"string"==typeof t?t.replace("px","")/this.bodyWidth:void 0}},computed:{style:function(){var t={},e="horizontal"===this.$parent.orient?"marginLeft":"marginTop";if(1*this.$parent.gutter!=0&&(t[e]=this.$parent.gutter+"px"),this.span)for(var n=0;n<o.length;n++)t[o[n]+"flex"]="0 0 "+100*this.buildWidth(this.span)+"%";return void 0!==this.order&&(t.order=this.order),t}},data:function(){return{bodyWidth:0}}},a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-flexbox-item",style:t.style},[t._t("default")],2)},r=[],l={render:a,staticRenderFns:r},c=l,u=n("VU/8"),d=u(s,c,!1,null,null,null);e.a=d.exports},8163:function(t,e){},DCDG:function(t,e){},Hw8E:function(t,e){},NHnr:function(t,e,n){"use strict";function i(t){n("yse6")}function o(){return"createTouch"in document}function s(t){for(var e={top:t.offsetTop,left:t.offsetLeft},n=t.offsetParent;n;)e.top+=t.offsetParent.offsetTop,e.left+=t.offsetParent.offsetLeft,n=n.offsetParent;return e}function a(t){var e=o()?t.touches[0]:t;return{x:e.pageX,y:e.pageY}}function r(t,e){var n=s(e).left,i=s(e).top,o=a(t);return{x:o.x-n,y:o.y-i}}function l(t){n("ajj8")}function c(t){n("Hw8E")}function u(t){n("SuS3")}function d(t){n("xJad")}function h(t){n("DCDG")}function f(t){n("xzyv")}function v(t){n("NmnX")}function p(t){n("8163")}function m(t){n("zgkG")}Object.defineProperty(e,"__esModule",{value:!0});var w=n("7+uW"),g={name:"app"},x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},y=[],b={render:x,staticRenderFns:y},k=b,_=n("VU/8"),S=i,C=_(g,k,!1,S,null,null),I=C.exports,B=n("/ocq"),H=n("Zrlr"),W=n.n(H),T=n("wxAW"),E=n.n(T),F=function(){function t(e){W()(this,t);var n=document.querySelector(e);this.context=n.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.context.lineCap="round",this.context.lineJoin="round",this.context.lineWidth=2,this._canWidth=n.width,this._canHeight=n.height,this.lastX=-1,this.lastY=-1,this.lineWidth=2,this.strokeStyle="#000"}return E()(t,[{key:"setLineWidth",value:function(t){this.lineWidth=t,this.context.lineWidth=t}},{key:"setBrushColor",value:function(t){this.strokeStyle=t,this.context.strokeStyle=t}},{key:"_start",value:function(t,e){this.context.beginPath(),this.context.moveTo(t,e),this.context.lineTo(t,e+.01),this.context.stroke(),this.lastX=t,this.lastY=e}},{key:"start",value:function(t,e){this.context.lineWidth=this.lineWidth,this.context.strokeStyle=this.strokeStyle,this._start(t,e)}},{key:"drawTo",value:function(t,e){this.context.beginPath(),this.context.moveTo(this.lastX,this.lastY),this.context.lineTo(t,e),this.context.stroke(),this.lastX=t,this.lastY=e}},{key:"end",value:function(){}},{key:"drawStoke",value:function(t){if(!(t.length<4)){var e=t[0],n=t[1];this.context.lineWidth=e,this.context.strokeStyle=n,this._start(t[2],t[3]);for(var i=4;i<t.length;)this.drawTo(t[i],t[i+1]),i+=2;this.end()}}}]),t}(),V=F,$=function(){function t(){W()(this,t),this.strokeIndex=0,this.lineWidth=2,this.strokeStyle="#000",this.currStroke=[],this.strokeHistory=[]}return E()(t,[{key:"setLineWidth",value:function(t){this.lineWidth=t}},{key:"setBrushColor",value:function(t){this.strokeStyle=t}},{key:"start",value:function(t,e){this.currStroke=[],this.currStroke.push(this.lineWidth,this.strokeStyle,t,e)}},{key:"drawTo",value:function(t,e){this.currStroke.push(t,e)}},{key:"printInfo",value:function(){}},{key:"end",value:function(){this.strokeIndex!==this.strokeHistory.length&&(this.strokeHistory=this.strokeHistory.slice(0,this.strokeIndex)),this.strokeHistory.push(this.currStroke),this.strokeIndex+=1,this.currStroke=[],this.printInfo()}},{key:"undo",value:function(){0!=this.strokeIndex&&(this.strokeIndex-=1,this.printInfo())}},{key:"redo",value:function(){this.strokeIndex!=this.strokeHistory.length&&(this.strokeIndex+=1,this.printInfo())}},{key:"clear",value:function(){this.currStroke=[],this.strokeHistory=[],this.strokeIndex=0}},{key:"history",get:function(){return this.strokeHistory.slice(0,this.strokeIndex)}}]),t}(),D=$,L=function(){function t(e){W()(this,t),this.drawLine=new V(e),this.drawHistory=new D,this.drawing=!1;var n=document.querySelector(e);this.context=n.getContext("2d"),this.canvasWidth=n.width,this.canvasHeight=n.height,this._canX=s(n).left,this._canY=s(n).top}return E()(t,[{key:"evtPointInCanvas",value:function(t){var e=a(t);return{x:e.x-this._canX,y:e.y-this._canY}}},{key:"isPointInCanvasArea",value:function(t,e){return t>=0&&t<=this.canvasWidth&&e>=0&&e<=this.canvasHeight}},{key:"drawStart",value:function(t,e){this.drawing=!0,this.drawLine.start(t,e),this.drawHistory.start(t,e)}},{key:"drawStartEvt",value:function(t){t.preventDefault();var e=this.evtPointInCanvas(t);return this.drawStart(e.x,e.y)}},{key:"drawTo",value:function(t,e){this.drawing&&(this.drawLine.drawTo(t,e),this.drawHistory.drawTo(t,e))}},{key:"drawToEvt",value:function(t){t.preventDefault();var e=this.evtPointInCanvas(t);return this.drawTo(e.x,e.y)}},{key:"drawEnd",value:function(){this.drawing=!1,this.drawLine.end(),this.drawHistory.end()}},{key:"drawEndEvt",value:function(t){return t.preventDefault(),this.drawEnd()}},{key:"selectLineWidth",value:function(t){this.drawLine.setLineWidth(t),this.drawHistory.setLineWidth(t)}},{key:"selectBrushColor",value:function(t){"string"==typeof t&&(this.drawLine.setBrushColor(t),this.drawHistory.setBrushColor(t))}},{key:"clearCanvas",value:function(){this.context.fillStyle="white",this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight)}},{key:"clearHistory",value:function(){this.drawHistory.clear()}},{key:"clear",value:function(){this.clearCanvas(),this.clearHistory()}},{key:"undo",value:function(){var t=this;this.drawHistory.undo(),this.clearCanvas(),this.drawHistory.history.forEach(function(e){t.drawLine.drawStoke(e)})}},{key:"redo",value:function(){var t=this;this.drawHistory.redo(),this.clearCanvas(),this.drawHistory.history.forEach(function(e){t.drawLine.drawStoke(e)})}}]),t}(),O=L,A=n("mvHQ"),P=n.n(A),N=function(){function t(e){W()(this,t),this.host=e.host||"localhost",this.playerRole=e.playerRole||"audience",this._conn=null,this._wsProcMap={},this.connect()}return E()(t,[{key:"connect",value:function(){var t=this,e="https:"===window.location.protocol?"wss":"ws",n="https:"===window.location.protocol?44301:44300,i=e+"://"+this.host+":"+n;console.log("connect to ",i),this._conn=new WebSocket(i),this._conn.onopen=function(e){console.log("ws open"),t.send({type:"role",role:t.playerRole})},this._conn.onclose=function(e){console.log("ws close"),setTimeout(function(){t.connect()},5e3)},this._conn.onerror=function(t){console.log("ws error"),this._conn.close()},this._conn.onmessage=function(e){console.log("message : ",e.data);var n=JSON.parse(e.data);n.type in t._wsProcMap&&t._wsProcMap[n.type](n)}}},{key:"bind",value:function(t,e){this._wsProcMap[t]=e}},{key:"send",value:function(t){this._conn.send(P()(t))}}]),t}(),X=N,R=(String,Boolean,{name:"icon",props:{type:String,isMsg:Boolean},computed:{className:function(){return"weui-icon weui_icon_"+this.type+" weui-icon-"+this.type.replace(/_/g,"-")}}}),j=function(){var t=this,e=t.$createElement;return(t._self._c||e)("i",{class:[t.className,t.isMsg?"weui-icon_msg":""]})},M=[],q={render:j,staticRenderFns:M},z=q,U=n("VU/8"),Y=l,Z=U(R,z,!1,Y,null,null),J=Z.exports,G=n("F3HL"),Q={large:40,middle:30,small:20},K=(G.a,G.b,Array,String,String,{large:40,middle:30,small:20}),tt={name:"color-picker",components:{Icon:J,Flexbox:G.a,FlexboxItem:G.b},created:function(){this.currentValue=this.value},props:{colors:{type:Array,required:!0},size:{type:String,default:"large"},value:String},computed:{width:function(){return K[this.size]}},data:function(){return{currentValue:""}},watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.$emit("on-change",t),this.$emit("input",t)}},methods:{change:function(t){this.currentValue=t}}},et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-color-picker"},[n("flexbox",t._l(t.colors,function(e){return n("flexbox-item",{key:e,staticClass:"vux-color-box"},[n("span",{staticClass:"vux-color-item",class:{"vux-color-white":"#fff"===e||"#fff"===e,"vux-color-picker-small":"small"===t.size,"vux-color-picker-middle":"middle"===t.size},style:{borderRadius:t.width/2+"px",backgroundColor:e,width:t.width+"px",height:t.width+"px"},on:{click:function(n){t.change(e)}}},[e===t.value?n("icon",{staticClass:"vux-color-checked",style:{lineHeight:t.width+"px"},attrs:{type:"success-no-circle"}}):t._e()],1)])}))],1)},nt=[],it={render:et,staticRenderFns:nt},ot=it,st=n("VU/8"),at=c,rt=st(tt,ot,!1,at,null,null),lt=rt.exports,ct=n("YxJB"),ut=n("3Lt7"),dt=n("0FxO"),ht=(Boolean,Boolean,Boolean,String,String,Boolean,String,Object,Array,{name:"x-button",props:{type:{default:"default"},disabled:Boolean,mini:Boolean,plain:Boolean,text:String,actionType:String,showLoading:Boolean,link:[String,Object],gradients:{type:Array,validator:function(t){return 2===t.length}}},methods:{onClick:function(){!this.disabled&&Object(dt.a)(this.link,this.$router)}},computed:{noBorder:function(){return Array.isArray(this.gradients)},buttonStyle:function(){if(this.gradients)return{background:"linear-gradient(90deg, "+this.gradients[0]+", "+this.gradients[1]+")",color:"#FFFFFF"}},classes:function(){return[{"weui-btn_disabled":!this.plain&&this.disabled,"weui-btn_plain-disabled":this.plain&&this.disabled,"weui-btn_mini":this.mini,"vux-x-button-no-border":this.noBorder},this.plain?"":"weui-btn_"+this.type,this.plain?"weui-btn_plain-"+this.type:"",this.showLoading?"weui-btn_loading":""]}}}),ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"weui-btn",class:t.classes,style:t.buttonStyle,attrs:{disabled:t.disabled,type:t.actionType},on:{click:t.onClick}},[t.showLoading?n("i",{staticClass:"weui-loading"}):t._e(),t._v(" "),t._t("default",[t._v(t._s(t.text))])],2)},vt=[],pt={render:ft,staticRenderFns:vt},mt=pt,wt=n("VU/8"),gt=u,xt=wt(ht,mt,!1,gt,null,null),yt=xt.exports,bt=n("JkZY"),kt=(bt.a,Boolean,String,String,Number,String,String,Boolean,Object,Boolean,{mixins:[bt.a],name:"x-dialog",model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1},maskTransition:{type:String,default:"vux-mask"},maskZIndex:[String,Number],dialogTransition:{type:String,default:"vux-dialog"},dialogClass:{type:String,default:"weui-dialog"},hideOnBlur:Boolean,dialogStyle:Object,scroll:{type:Boolean,default:!0,validator:function(t){return!0}}},computed:{maskStyle:function(){if(void 0!==this.maskZIndex)return{zIndex:this.maskZIndex}}},mounted:function(){"undefined"!=typeof window&&window.VUX_CONFIG&&"VIEW_BOX"===window.VUX_CONFIG.$layout&&(this.layout="VIEW_BOX")},watch:{show:function(t){this.$emit("update:show",t),this.$emit(t?"on-show":"on-hide"),t?this.addModalClassName():this.removeModalClassName()}},methods:{shouldPreventScroll:function(){var t=/iPad|iPhone|iPod/i.test(window.navigator.userAgent),e=this.$el.querySelector("input")||this.$el.querySelector("textarea");if(t&&e)return!0},hide:function(){this.hideOnBlur&&(this.$emit("update:show",!1),this.$emit("change",!1),this.$emit("on-click-mask"))}},data:function(){return{layout:""}}}),_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-x-dialog",class:{"vux-x-dialog-absolute":"VIEW_BOX"===t.layout}},[n("transition",{attrs:{name:t.maskTransition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-mask",style:t.maskStyle,on:{click:t.hide}})]),t._v(" "),n("transition",{attrs:{name:t.dialogTransition}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:t.dialogClass,style:t.dialogStyle},[t._t("default")],2)])],1)},St=[],Ct={render:_t,staticRenderFns:St},It=Ct,Bt=n("VU/8"),Ht=d,Wt=Bt(kt,It,!1,Ht,null,null),Tt=Wt.exports,Et=(Boolean,Boolean,String,String,Boolean,String,String,String,String,Number,String,String,String,Boolean,Object,Boolean,String,{name:"confirm",components:{XDialog:Tt},props:{value:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},placeholder:{type:String,default:""},theme:{type:String,default:"ios"},hideOnBlur:{type:Boolean,default:!1},title:String,confirmText:String,cancelText:String,maskTransition:{type:String,default:"vux-fade"},maskZIndex:[Number,String],dialogTransition:{type:String,default:"vux-dialog"},content:String,closeOnConfirm:{type:Boolean,default:!0},inputAttrs:Object,showContent:{type:Boolean,default:!0},confirmType:{type:String,default:"primary"}},created:function(){this.showValue=this.show,this.value&&(this.showValue=this.value)},watch:{value:function(t){this.showValue=t},showValue:function(t){var e=this;this.$emit("input",t),t&&(this.showInput&&(this.msg="",setTimeout(function(){e.$refs.input&&e.setInputFocus()},300)),this.$emit("on-show"))}},data:function(){return{msg:"",showValue:!1}},methods:{getInputAttrs:function(){return this.inputAttrs||{type:"text"}},setInputValue:function(t){this.msg=t},setInputFocus:function(t){t&&t.preventDefault(),this.$refs.input.focus()},_onConfirm:function(){this.showValue&&(this.closeOnConfirm&&(this.showValue=!1),this.$emit("on-confirm",this.msg))},_onCancel:function(){this.showValue&&(this.showValue=!1,this.$emit("on-cancel"))}}}),Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-confirm"},[n("x-dialog",{attrs:{"dialog-class":"android"===t.theme?"weui-dialog weui-skin_android":"weui-dialog","mask-transition":t.maskTransition,"dialog-transition":"android"===t.theme?"vux-fade":t.dialogTransition,"hide-on-blur":t.hideOnBlur,"mask-z-index":t.maskZIndex},on:{"on-hide":function(e){t.$emit("on-hide")}},model:{value:t.showValue,callback:function(e){t.showValue=e},expression:"showValue"}},[t.title?n("div",{staticClass:"weui-dialog__hd",class:{"with-no-content":!t.showContent}},[n("strong",{staticClass:"weui-dialog__title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.showContent?[t.showInput?n("div",{staticClass:"vux-prompt"},["checkbox"===t.getInputAttrs().type?n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.msg)?t._i(t.msg,null)>-1:t.msg},on:{touchend:t.setInputFocus,change:function(e){var n=t.msg,i=e.target,o=!!i.checked;if(Array.isArray(n)){var s=t._i(n,null);i.checked?s<0&&(t.msg=n.concat([null])):s>-1&&(t.msg=n.slice(0,s).concat(n.slice(s+1)))}else t.msg=o}}},"input",t.getInputAttrs(),!1)):"radio"===t.getInputAttrs().type?n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.msg,null)},on:{touchend:t.setInputFocus,change:function(e){t.msg=null}}},"input",t.getInputAttrs(),!1)):n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:t.getInputAttrs().type},domProps:{value:t.msg},on:{touchend:t.setInputFocus,input:function(e){e.target.composing||(t.msg=e.target.value)}}},"input",t.getInputAttrs(),!1))]):n("div",{staticClass:"weui-dialog__bd"},[t._t("default",[n("div",{domProps:{innerHTML:t._s(t.content)}})])],2)]:t._e(),t._v(" "),n("div",{staticClass:"weui-dialog__ft"},[n("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t._onCancel}},[t._v(t._s(t.cancelText||"取消"))]),t._v(" "),n("a",{staticClass:"weui-dialog__btn",class:"weui-dialog__btn_"+t.confirmType,attrs:{href:"javascript:;"},on:{click:t._onConfirm}},[t._v(t._s(t.confirmText||"确定"))])])],2)],1)},Vt=[],$t={render:Ft,staticRenderFns:Vt},Dt=$t,Lt=n("VU/8"),Ot=h,At=Lt(Et,Dt,!1,Ot,null,null),Pt=At.exports,Nt=(ct.a,ut.a,{data:function(){return{viewportContentBackup:"",showImgDlg:!1,showClearConfirm:!1,imgData:null,canvasWidth:350,canvasHeight:400,lineWidths:[2,4,6,10,18],predefineColors:[["#fff","#000","#9b9b9b","#ff4c62"],["#fec410","#fdf902","#91c601","#516dfe"],["#2ccff5","#9c7cff","#00A64C","#af743f"],["#cca86d","#f0d881","#ffc4d6","#ff00b2"]],canvas:null,context:null,draw:null,ws:null,lineWidth:2,brushColor:"#000"}},computed:{},components:{ColorPicker:lt,Flexbox:ct.a,FlexboxItem:ut.a,XButton:yt,XDialog:Tt,Confirm:Pt},created:function(){var t=document.querySelector("meta[name=viewport]");this.viewportContentBackup=t.getAttribute("content"),t.setAttribute("content","width=device-width,initial-scale=1.0,user-scalable=0")},beforeDestroy:function(){document.querySelector("meta[name=viewport]").setAttribute("content",this.viewportContentBackup)},watch:{brushColor:function(t,e){this.selectBrushColor(t)}},mounted:function(){var t=document.querySelector("#canvas");if(!t.getContext)return void alert("该浏览器不支持<canvas>");this.canvas=t,this.draw=new O("#canvas"),this.draw.clearCanvas(),this.ws=new X({host:n("qg4i").wsHost,playerRole:"painter"})},methods:{clear:function(){this.draw.clear(),this.ws.send({type:"clear"})},undo:function(){this.draw.undo(),this.ws.send({type:"undo"})},redo:function(){this.draw.redo(),this.ws.send({type:"redo"})},save:function(){var t=document.getElementById("canvas"),e=t.toDataURL("image/png");this.imgData=e,this.showImgDlg=!0},drawStart:function(t){t.preventDefault();var e=r(t,this.canvas);this.draw.drawStart(e.x,e.y),this.ws.send({type:"drawStart",point:{x:e.x,y:e.y}})},drawTo:function(t){if(t.preventDefault(),this.draw.drawing){var e=r(t,this.canvas);this.draw.drawTo(e.x,e.y),this.ws.send({type:"drawTo",point:{x:e.x,y:e.y}})}},drawEnd:function(t){t.preventDefault(),this.draw.drawEnd(t),this.ws.send({type:"drawEnd"})},selectLineWidth:function(t){this.draw.selectLineWidth(t),this.lineWidth=t,this.ws.send({type:"selectLineWidth",value:t})},selectBrushColor:function(t){this.draw.selectBrushColor(t),this.ws.send({type:"selectBrushColor",value:t})}}}),Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"canvas-container"},[n("canvas",{attrs:{id:"canvas",width:t.canvasWidth,height:t.canvasHeight},on:{mousedown:t.drawStart,mousemove:t.drawTo,mouseup:t.drawEnd,touchstart:t.drawStart,touchmove:t.drawTo,touchend:t.drawEnd}})]),t._v(" "),n("flexbox",[n("flexbox-item",[n("x-button",{attrs:{plain:"",mini:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("save")])],1),t._v(" "),n("flexbox-item",[n("x-button",{attrs:{plain:"",mini:""},nativeOn:{click:function(e){t.showClearConfirm=!0}}},[t._v("clear")])],1),t._v(" "),n("flexbox-item",[n("x-button",{attrs:{plain:"",mini:""},nativeOn:{click:function(e){return t.redo(e)}}},[t._v("redo")])],1),t._v(" "),n("flexbox-item",[n("x-button",{attrs:{plain:"",mini:""},nativeOn:{click:function(e){return t.undo(e)}}},[t._v("undo")])],1)],1),t._v(" "),n("flexbox",{staticClass:"ctl-row"},t._l(t.lineWidths,function(e){return n("flexbox-item",{key:e,staticClass:"width-example-box",class:{active:e==t.lineWidth},nativeOn:{click:function(n){t.selectLineWidth(e)}}},[n("span",{class:"width-example-"+e}),t._v(" "),n("span",[t._v(t._s(e))])])})),t._v(" "),t._l(t.predefineColors,function(e){return n("color-picker",{key:e.key,staticClass:"ctl-row",attrs:{colors:e,size:"middle"},model:{value:t.brushColor,callback:function(e){t.brushColor=e},expression:"brushColor"}})}),t._v(" "),n("x-dialog",{staticClass:"dialog-demo",attrs:{"hide-on-blur":""},model:{value:t.showImgDlg,callback:function(e){t.showImgDlg=e},expression:"showImgDlg"}},[n("div",{staticClass:"img-box"},[n("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.imgData}})]),t._v(" "),n("div",[n("span",{staticStyle:{color:"#777"}},[t._v("长按或右键保存")])])]),t._v(" "),n("confirm",{attrs:{"hide-on-blur":""},on:{"on-confirm":t.clear},model:{value:t.showClearConfirm,callback:function(e){t.showClearConfirm=e},expression:"showClearConfirm"}},[n("p",{staticStyle:{"text-align":"center"}},[t._v("确定清除画布?")])])],2)},Rt=[],jt={render:Xt,staticRenderFns:Rt},Mt=jt,qt=n("VU/8"),zt=f,Ut=qt(Nt,Mt,!1,zt,"data-v-76e972c1",null),Yt=Ut.exports,Zt=(ct.a,ut.a,{data:function(){return{viewportContentBackup:"",showImgDlg:!1,showClearConfirm:!1,imgData:null,canvasWidth:350,canvasHeight:400,context:null,draw:null,ws:null}},computed:{},components:{ColorPicker:lt,Flexbox:ct.a,FlexboxItem:ut.a,XButton:yt,XDialog:Tt,Confirm:Pt},created:function(){var t=document.querySelector("meta[name=viewport]");this.viewportContentBackup=t.getAttribute("content"),t.setAttribute("content","width=device-width,initial-scale=1.0,user-scalable=0")},beforeDestroy:function(){document.querySelector("meta[name=viewport]").setAttribute("content",this.viewportContentBackup)},watch:{brushColor:function(t,e){this.draw.selectBrushColor(t)}},mounted:function(){var t=this;if(!document.querySelector("#canvas").getContext)return void alert("该浏览器不支持<canvas>");this.draw=new O("#canvas"),this.draw.clearCanvas();var e=new X({host:n("qg4i").wsHost,playerRole:"audience"});e.bind("drawStart",function(e){t.draw.drawStart(e.point.x,e.point.y)}),e.bind("drawTo",function(e){t.draw.drawTo(e.point.x,e.point.y)}),e.bind("drawEnd",function(e){t.draw.drawEnd()}),e.bind("selectLineWidth",function(e){t.draw.selectLineWidth(e.value)}),e.bind("selectBrushColor",function(e){t.draw.selectBrushColor(e.value)}),e.bind("undo",function(e){t.draw.undo()}),e.bind("redo",function(e){t.draw.redo()}),e.bind("clear",function(e){t.draw.clear()}),this.ws=e},methods:{save:function(){var t=document.getElementById("canvas"),e=t.toDataURL("image/png");this.imgData=e,this.showImgDlg=!0}}}),Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"canvas-container"},[n("canvas",{attrs:{id:"canvas",width:t.canvasWidth,height:t.canvasHeight}})]),t._v(" "),n("flexbox",[n("flexbox-item",[n("x-button",{attrs:{plain:"",mini:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("save")])],1)],1),t._v(" "),n("x-dialog",{staticClass:"dialog-demo",attrs:{"hide-on-blur":""},model:{value:t.showImgDlg,callback:function(e){t.showImgDlg=e},expression:"showImgDlg"}},[n("div",{staticClass:"img-box"},[n("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.imgData}})]),t._v(" "),n("div",[n("span",{staticStyle:{color:"#777"}},[t._v("长按或右键保存")])])])],1)},Gt=[],Qt={render:Jt,staticRenderFns:Gt},Kt=Qt,te=n("VU/8"),ee=v,ne=te(Zt,Kt,!1,ee,"data-v-1e2ac428",null),ie=ne.exports,oe=(ct.a,ut.a,{components:{Flexbox:ct.a,FlexboxItem:ut.a,XButton:yt},methods:{navTo:function(t){this.$router.push({path:t})}}}),se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("flexbox",{attrs:{orient:"vertical",directhon:"column",justify:"center"}},[n("flexbox-item",[n("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.navTo("/draw")}}},[t._v("我来画")])],1),t._v(" "),n("flexbox-item",[n("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.navTo("audience")}}},[t._v("我来猜")])],1)],1)],1)},ae=[],re={render:se,staticRenderFns:ae},le=re,ce=n("VU/8"),ue=p,de=ce(oe,le,!1,ue,null,null),he=de.exports,fe=n("Xxa5"),ve=n.n(fe),pe=n("exGp"),me=n.n(pe),we=n("//Fk"),ge=n.n(we),xe={mounted:function(){if(!document.querySelector("#canvas").getContext)return void alert("该浏览器不支持<canvas>");this.draw=new O("#canvas"),this.draw.clearCanvas(),window.bixin=window.比心=this.drawHeartSlow},computed:{canvasWidth:function(){return document.documentElement.clientWidth},canvasHeight:function(){return document.documentElement.clientHeight}},methods:{sleep:function(t){return new ge.a(function(e){return setTimeout(e,t)})},drawHeart:function(t,e,n){var i=this;return me()(ve.a.mark(function o(){var s,a,r,l;return ve.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t=t||0,e=e||0,n=n||0,i.draw.selectBrushColor("#f00"),s=void 0,a=void 0,r=void 0,l=!1,s=0;case 7:if(!(s<2*Math.PI)){o.next=22;break}if(a=16*Math.pow(Math.sin(s),3),r=13*Math.cos(s)-5*Math.cos(2*s)-2*Math.cos(3*s)-Math.cos(4*s),a*=3,a+=t,r*=-3,r+=e,!(n>0)){o.next=17;break}return o.next=17,i.sleep(n);case 17:l||(i.draw.drawStart(a,r),l=!0),i.draw.drawTo(a,r);case 19:s+=.1,o.next=7;break;case 22:i.draw.drawEnd();case 23:case"end":return o.stop()}},o,i)}))()},drawHeartEvt:function(t){console.log(t.pageX,t.pageY),this.drawHeart(t.pageX,t.pageY)},drawHeartSlow:function(t,e){this.drawHeart(t,e,50)}}},ye=function(){var t=this,e=t.$createElement;return(t._self._c||e)("canvas",{attrs:{id:"canvas",width:t.canvasWidth,height:t.canvasHeight},on:{touchstart:t.drawHeartEvt,mousedown:t.drawHeartEvt}})},be=[],ke={render:ye,staticRenderFns:be},_e=ke,Se=n("VU/8"),Ce=m,Ie=Se(xe,_e,!1,Ce,null,null),Be=Ie.exports;w.a.use(B.a);var He=new B.a({routes:[{path:"/",name:"home",redirect:"/role"},{path:"/role",name:"role",component:he},{path:"/draw",name:"draw",component:Yt},{path:"/audience",name:"audience",component:ie},{path:"/bixin",name:"bixin",component:Be}]}),We=n("NYxO");w.a.use(We.a);var Te=new We.a.Store({state:{},mutations:{},actions:{}}),Ee=n("v5o6");n.n(Ee).a.attach(document.body),w.a.config.productionTip=!1,new w.a({router:He,store:Te,render:function(t){return t(I)}}).$mount("#app-box")},NmnX:function(t,e){},SuS3:function(t,e){},YxJB:function(t,e,n){"use strict";function i(t){n("vZEm")}var o=(Number,String,String,String,String,String,{name:"flexbox",props:{gutter:{type:Number,default:8},orient:{type:String,default:"horizontal"},justify:String,align:String,wrap:String,direction:String},computed:{styles:function(){return{"justify-content":this.justify,"-webkit-justify-content":this.justify,"align-items":this.align,"-webkit-align-items":this.align,"flex-wrap":this.wrap,"-webkit-flex-wrap":this.wrap,"flex-direction":this.direction,"-webkit-flex-direction":this.direction}}}}),s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-flexbox",class:{"vux-flex-col":"vertical"===t.orient,"vux-flex-row":"horizontal"===t.orient},style:t.styles},[t._t("default")],2)},a=[],r={render:s,staticRenderFns:a},l=r,c=n("VU/8"),u=i,d=c(o,l,!1,u,null,null);e.a=d.exports},ajj8:function(t,e){},qg4i:function(t,e){t.exports={wsHost:"kamisama.space",wsPort:44300,wssPort:44301}},vZEm:function(t,e){},xJad:function(t,e){},xzyv:function(t,e){},yse6:function(t,e){},zgkG:function(t,e){}},["NHnr"]);